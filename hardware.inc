; memory map
; 0xxx - ram
; 10xx - io
; 11xx - rom

; ram map
; 0000 -> 0fff - temp storage (stack at 0fff)
; 4000 -> 7fff - 16kb for rom when uploading, also banked
; rom map
; c000 -> ffff - program

; ascii constants

NULL            .equ 0x00
BS              .equ 0x08
CR              .equ 0x0d
LF              .equ 0x0a
SOH		.equ 0x01
ACK		.equ 0x06
NAK		.equ 0x15
EOT		.equ 0x04
SP		.equ 0x20

; 16C654 QUART

BASE16C654	.equ 0x8000

BASEPA16C654	.equ BASE16C654+0
RHRPA16C654	.equ BASEPA16C654+0
THRPA16C654	.equ BASEPA16C654+0
IERPA16C654	.equ BASEPA16C654+1
ISRPA16C654	.equ BASEPA16C654+2
FIFOCRPA16C654	.equ BASEPA16C654+2
LCRPA16C654	.equ BASEPA16C654+3
MCRPA16C654	.equ BASEPA16C654+4
LSRPA16C654	.equ BASEPA16C654+5
MSRPA16C654	.equ BASEPA16C654+6
SRPA16C654	.equ BASEPA16C654+7
LSBDLPA16C654	.equ BASEPA16C654+0
MSBDLPA16C654	.equ BASEPA16C654+1

BASEPB16C654	.equ BASE16C654+8
RHRPB16C654	.equ BASEPB16C654+0
THRPB16C654	.equ BASEPB16C654+0
IERPB16C654	.equ BASEPB16C654+1
ISRPB16C654	.equ BASEPB16C654+2
FIFOCRPB16C654	.equ BASEPB16C654+2
LCRPB16C654	.equ BASEPB16C654+3
MCRPB16C654	.equ BASEPB16C654+4
LSRPB16C654	.equ BASEPB16C654+5
MSRPB16C654	.equ BASEPB16C654+6
SRPB16C654	.equ BASEPB16C654+7
LSBDLPB16C654	.equ BASEPB16C654+0
MSBDLPB16C654	.equ BASEPB16C654+1

BASEPC16C654	.equ BASE16C654+16
RHRPC16C654	.equ BASEPC16C654+0
THRPC16C654	.equ BASEPC16C654+0
IERPC16C654	.equ BASEPC16C654+1
ISRPC16C654	.equ BASEPC16C654+2
FIFOCRPC16C654	.equ BASEPC16C654+2
LCRPC16C654	.equ BASEPC16C654+3
MCRPC16C654	.equ BASEPC16C654+4
LSRPC16C654	.equ BASEPC16C654+5
MSRPC16C654	.equ BASEPC16C654+6
SRPC16C654	.equ BASEPC16C654+7
LSBDLPC16C654	.equ BASEPC16C654+0
MSBDLPC16C654	.equ BASEPC16C654+1

BASEPD16C654	.equ BASE16C654+24
RHRPD16C654	.equ BASEPD16C654+0
THRPD16C654	.equ BASEPD16C654+0
IERPD16C654	.equ BASEPD16C654+1
ISRPD16C654	.equ BASEPD16C654+2
FIFOCRPD16C654	.equ BASEPD16C654+2
LCRPD16C654	.equ BASEPD16C654+3
MCRPD16C654	.equ BASEPD16C654+4
LSRPD16C654	.equ BASEPD16C654+5
MSRPD16C654	.equ BASEPD16C654+6
SRPD16C654	.equ BASEPD16C654+7
LSBDLPD16C654	.equ BASEPD16C654+0
MSBDLPD16C654	.equ BASEPD16C654+1

; 6522

BASE6522	.equ 0x8100
PORTB6522	.equ BASE6522+0x0
PORTA6522	.equ BASE6522+0x1
DDRB6522	.equ BASE6522+0x2
DDRA6522	.equ BASE6522+0x3
T1CL6522	.equ BASE6522+0x4
T1CH6522	.equ BASE6522+0x5
T1LL6522	.equ BASE6522+0x6
T1LH6522	.equ BASE6522+0x7
T2LL6522	.equ BASE6522+0x8
T2CL6522	.equ BASE6522+0x8
T2CH6522	.equ BASE6522+0x9
SR6522		.equ BASE6522+0xa
ACR6522		.equ BASE6522+0xb
PCR6522		.equ BASE6522+0xc
IFR6522		.equ BASE6522+0xd
IER6522		.equ BASE6522+0xe
ORAX6522	.equ BASE6522+0xf

; joysticks

JOYPORT0	.equ 0x8200
JOYPORT1	.equ 0x8300

; joystick masks

JOYUP		.equ 0x01
JOYDOWN		.equ 0x02
JOYLEFT		.equ 0x04
JOYRIGHT	.equ 0x08
JOYFIRE1	.equ 0x10
JOYFIRE2	.equ 0x20

; OPL2

OPLBASE		.equ 0x8400

; v9958

VBASE		.equ 0x8500
VPORT0		.equ VBASE
VPORT1		.equ VBASE+1
VPORT2		.equ VBASE+2
VPORT3		.equ VBASE+3

VDIRECTPORT	.equ VPORT1

VSTATUSREG	.equ 15
VSTATUSPORT	.equ VPORT1
VPALETTEREG	.equ 16
VPALETTEPORT	.equ VPORT2
VINDIRECTREG	.equ 17
VINDIRECTPORT	.equ VPORT3
VADDRREG	.equ 14
VADDRPORT	.equ VPORT1

VBANKREG	.equ 45
VMODE0REG	.equ 0
VMODE1REG	.equ 1
VMODE2REG	.equ 8
VMODE3REG	.equ 9
VVIDBASEREG	.equ 2
VCOLBASELREG	.equ 3
VCOLBASEHREG	.equ 10
VPATTBASEREG	.equ 4
VSPRBASELREG	.equ 5
VSPRBASEHREG	.equ 11
VSPRGBASEREG	.equ 6
VCOLOUR1REG	.equ 7
VCOLOUR2REG	.equ 12
VBLINKREG	.equ 13
VCOLBURST1REG	.equ 20
VCOLBURST2REG	.equ 21
VCOLBURST3REG	.equ 22
VDISPLAYPOSREG	.equ 18
VDISPLAYOFFREG	.equ 23
VINTLINEREG	.equ 19
VSRCXLREG	.equ 32
VSRCXHREG	.equ 33
VSRCYLREG	.equ 34
VSRCYHREG	.equ 35
VDSTXLREG	.equ 36
VDSTXHREG	.equ 37
VDSTYLREG	.equ 38
VDSTYHREG	.equ 39
VDOTSXLREG	.equ 40
VDOTSXHREG	.equ 41
VDOTSYLREG	.equ 42
VDOTSYHREG	.equ 43
VCOMCOLOURREG	.equ 44
VCOMARGREG	.equ 45
VCOMCOMMANDREG	.equ 46

; DISCo

DISCOBASE	.equ 0x8e00

; general

LED		.equ DISCOBASE+0x00
BUZZER		.equ DISCOBASE+0x01
RESETTRIGGER	.equ DISCOBASE+0x02

; irq routing

NMISOURCESR	.equ DISCOBASE+0x10
NMISOURCESS	.equ DISCOBASE+0x11
IRQSOURCESR	.equ DISCOBASE+0x12
IRQSOURCESS	.equ DISCOBASE+0x13
FIRQSOURCESR	.equ DISCOBASE+0x14
FIRQSOURCESS	.equ DISCOBASE+0x15

; current irq state

ACTIVENMI	.equ NMISOURCESR
ACTIVEIRQ	.equ IRQSOURCESR
ACTIVEFIRQ	.equ FIRQSOURCESR

; irq bits

INTKBDREQ	.equ 0x01
INTOPL		.equ 0x02
INT6522		.equ 0x04
INTRTC		.equ 0x08
INTUART		.equ 0x10
INTIDE		.equ 0x20
INTVDC		.equ 0x40
INTMUDDY	.equ 0x80

; ide

IDEBASE		.equ DISCOBASE+0x20
IDEDATA		.equ IDEBASE+0x0
IDEERR		.equ IDEBASE+0x1
IDEFEATURES	.equ IDEBASE+0x1
IDECOUNT	.equ IDEBASE+0x2
IDELBA0		.equ IDEBASE+0x3
IDELBA1		.equ IDEBASE+0x4
IDELBA2		.equ IDEBASE+0x5
IDELBA3		.equ IDEBASE+0x6
IDEHEADS	.equ IDEBASE+0x6
IDESTATUS	.equ IDEBASE+0x7
IDECOMMAND	.equ IDEBASE+0x7

; MuDdy

MUDDYBASE	.equ 0x8f00

DMABASE		.equ MUDDYBASE
DMASRC		.equ DMABASE+0
DMADST		.equ DMABASE+2
DMALENGTH	.equ DMABASE+4
DMAFLAGS	.equ DMABASE+6

MUDDYSTATE	.equ MUDDYBASE+7

; memory

HIRAMSTART	.equ 0x4000
HIRAMEND	.equ 0x7fff
RAMSTART        .equ 0x0000
RAMEND          .equ 0x7fff
ROMSTART        .equ 0xc000
ROMEND          .equ 0xffff
ROMCOPYSTART    .equ 0x4000
ROMCOPYEND      .equ 0x7fff

STACKEND	.equ 0x1fff
USERSTACKEND	.equ 0x2800

PCOFFSET	.equ 10

; macros

.macro		enableinterrupts
		andcc #0xaf
.endm

.macro		disableinterrupts
		orcc #0x50
.endm
		